.piece {
    width:28px;
    height:28px;
    border-radius:50%;
    position:absolute;
    transform:translate(-50%,-50%);
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    font-weight:700;
    pointer-events:auto;
    cursor:pointer;
    transition: transform 400ms ease, left 400ms ease, top 400ms ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.25);
    border:2px solid #fff;
    user-select:none;
}

/* رنگ‌ها */
.piece.red { background:#e03131; }
.piece.blue { background:#1971c2; }
.piece.green { background:#1b8a44; }
.piece.yellow { background:#f59f00; color:#111; }

/* انتخاب‌شده */
.piece.selected { outline:3px solid rgba(0,0,0,0.12); transform:scale(1.15) translate(-50%,-50%); z-index:999; }

/* پیام‌ها */
#messages { background:#fff8c6; padding:8px; border-radius:6px; border:1px solid #e6d58b; max-width:360px; }

/* لایهٔ مهره‌ها بالای SVG */
#pieces-layer { pointer-events:none; }

/* SVG piece styling */
svg .red use { fill: #e03131; }
svg .blue use { fill: #1971c2; }
svg .green use { fill: #1b8a44; }
svg .yellow use { fill: #f59f00; }

svg g {
    transition: transform 400ms ease;
    pointer-events: auto;
}

svg text {
    pointer-events: none;
    user-select: none;
}